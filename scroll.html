<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body style="height: 5000px;">
    <style>
        p{
            font-size: 10rem;
            text-align: center;
            padding: 300px 0;
            margin: 0;
        }

        p:nth-child(even) {
            background-color: rgba(221, 39, 7, 0.849);
        }
    </style>
    

    <div>
        <p>0</p>
        <p>1</p>
        <p>2</p>
        <p>3</p>
        <p>4</p>
        <p>5</p>
    </div>
    <article>
        <button>0</button>
        <button>1</button>
        <button>2</button>
        <button>3</button>
        <button>4</button>
        <button>5</button>
    </article>


    <script>
        //스크롤 업,다운
        let pos = {y:0, y2:0, state: true }
        let idx = 0;
        let timeOut;
        let tagValue; 

        const elPtag = document.querySelectorAll('p');

        window.addEventListener('scroll',function(){
            
            pos.y = window.pageYOffset;
            pos.state =( pos.y > pos.y2 )? true: false;   // 스크롤 업 다운 이슈 
            pos.y2 = pos.y;
            
            // if(pos.y > pos.y2) {
                //     pos.state = true; 
                //     console.log('down')
                // }else{
                    //     pos.state = false;
                    //     console.log('up')
                    // }
                    // pos.y2 = pos.y;
                    
                clearTimeout(timeOut);
                timeOut = setTimeout(function(){
                    if (pos.state) {
                        //scroll 시 나타나는 이벤트 
                        idx ++;
                        tagValue = '#ddd';
                    } else {
                        idx--; 
                        tagValue = 'black';
                    }

                    elPtag[idx].style.color = tagValue;


                    // //스크롤이동 
                    // window.scrollTo({
                    //     lef:0,
                    //     top: elPtag[3].offsetTop,
                    //     behavior: 'smooth'
                    // });   



            

                    // // 스크롤 이동이 반절부터
                    // if (elPtag[3].offsetTop - window.innerHeight < window.pageYOffset) {  
                    //        //window.innerHeight*0.5 : 463.5 (절반)

                    //     console.log('콘텐츠03')
                    // }

                //콘텐츠가 하단에 위치하면 명령 전달
                let offset = elPtag[idx].offsetTop - window.innerHeight;
                if(offset < window.pageYOffset) {
                    console.log('콘텐츠'+idx)
                }

            },100)        

            
            
            // setTimeout();
            // clearTimeout()


            const btn = document.querySelectorAll('button')
            
            btn.forEach(function(el,key){
                el.addEventListener('click',function(){
                    //스크롤이동 
                    window.scrollTo({
                        left:0,
                        top: elPtag[key].offsetTop,
                        behavior: 'smooth'
                    }); 
                })
            })
        });

        console.log(
            // el.offsetTop() //콘텐츠 위치값
            // document.body.scrollHeight //문서전체 높이값
            // window.pageYOffset //스크롤값
            // scrollTo(); // 스크롤 위치 이동
        )
        
    </script>

</body>
</html>
